\usepackage{latexsym}
\usepackage[empty]{fullpage}
\usepackage{titlesec}
\usepackage{marvosym}
\usepackage{comment}
\usepackage[dvipsnames]{xcolor}
\usepackage{verbatim}
\usepackage{enumitem}
\usepackage[pdftex,colorlinks=true,linkcolor=blue,urlcolor=urlcolor]{hyperref}
\usepackage{fancyhdr}
\usepackage{fontawesome}
\usepackage{amsmath, amsfonts, mathtools, amsthm, amssymb}
\usepackage{academicons}
\usepackage{lastpage}
\usepackage{xpatch}
% \usepackage{hyperref}

\hypersetup{
    pdftitle={Yi Ding's CV}, % 设置PDF标题
    pdfauthor={Yi Ding},            % 设置PDF作者
    % pdfsubject={Subject of the PDF},  % 设置PDF主题
    % pdfkeywords={keyword1, keyword2}  % 设置PDF关键词
}


\definecolor{themecolor}{RGB}{5,28,44}
\definecolor{urlcolor}{RGB}{83,87,112}



% \pagestyle{fancy}
\pagestyle{fancy}
\fancyhf{} % 清空页眉和页脚
\renewcommand{\headrulewidth}{0pt} % 去掉页眉下划线
\renewcommand{\footrulewidth}{0pt} % 去掉页脚上划线

% 自定义居中的页脚
\cfoot{\makebox[\textwidth][c]{\color{gray}\textit{\small Yi Ding - Page \thepage{} of \pageref*{LastPage}}}}

% \renewcommand{\headrulewidth}{0pt}
% \renewcommand{\footrulewidth}{0pt}

% Define a new conditional variable
\newif\iffullversion

% Adjust margins
\addtolength{\oddsidemargin}{-0.375in}
\addtolength{\evensidemargin}{-0.375in}
\addtolength{\textwidth}{1in}
\addtolength{\topmargin}{-.5in}
\addtolength{\textheight}{1in}

\urlstyle{rm}

\raggedbottom
\raggedright
\setlength{\tabcolsep}{0in}

% Sections formatting
\titleformat{\section}{
      \color{themecolor}\vspace{-3pt}\scshape\raggedright\Large
}{}{0em}{}[\color{themecolor}\titlerule \vspace{-3pt}]

\titleformat{\subsection}{
      \color{themecolor}\vspace{-3pt}\scshape\raggedright\large
}{}{0em}{}[\vspace{-3pt}]

\newcommand*{\Me}{{\color{themecolor!80!white} \textbf{\author}}}
\newcommand*{\Spotlight}{{\color{red!80!black} \textbf{Spotlight}}}

\renewcommand{\url}[1]{\href{#1}{\webpagesymbol}}

%──────────────────Customized List──────────────────────────────────────────────────────────────────────────────────────────────────────-------------

% heading
\setlist[itemize, 1]{leftmargin=*, label=\(\centerdot\)}
\setlist[itemize, 2]{after=\vspace{-2pt}, label=\(\circ\)}

\newcommand{\heading}[4]{
      \begin{tabular*}{0.97\textwidth}{l@{\extracolsep {\fill}}r}
            \textbf{#1} & \textbf{#2}\vspace{0pt} \\
            {#3} & \emph{\small #4} \\
      \end{tabular*}\vspace{-2pt}
}


\newcommand{\detail}[3]{{\small{\expandafter\ifx\expandafter\relax\detokenize{#1}\relax
                              \textnormal{#2}
                        \else
                              \textnormal{\textbf{#1}: #2}
                        \fi
                        \expandafter\ifx\expandafter\relax\detokenize{#3}\relax
                        \else
                              \hfill\textnormal{\emph{#3}}{\parfillskip=6pt\par}%
                        \fi
                        \vspace{-1pt}
                  }
            }
}


% publication
\begin{comment}
Usage:
Use \Me{} in the content when mention yourself (i.e., author of the publications)

\begin{itemize}
      \item \heading{<bold title>}{<location>}{<detail>}{<duration> (optional)}
            \begin{itemize}
                  \item \detail{<bold emphasize> (optional)}{<context>}{<duration> (optional)}
            \end{itemize}
\end{itemize}
\end{comment}

\newlist{publication@}{enumerate}{1}
\setlist[publication@]{}
\newenvironment{publication}[1][]{\begin{publication@}[label={[#1\arabic*]}]}{\end{publication@}}

\newcommand{\pub}[7]{{
      \large\textbf{#2}\\\vspace{2pt} % 第一行：论文题目（大字体加粗）
      \normalsize{#1}\\\vspace{1pt} % 第二行：作者（正常字体）
      \expandafter\ifx\expandafter\relax\detokenize{#4}\relax
            \normalsize\emph{\color{gray}{#3}} % 第三行：会议名字（正常字体）
      \else
            \emph{\color{gray}{#3}} (\color{gray}{#4}) % 第三行：会议名字 + 年份（正常字体）
      \fi
      \expandafter\ifx\expandafter\relax\detokenize{#5}\relax
      \else
            {#5} % 第三行补充信息
      \fi
      \expandafter\ifx\expandafter\relax\detokenize{#6}\relax
      \else
            \href{#6}{\color{themecolor!80!white}{\faFilePdfO}} % PDF 链接
      \fi
      \expandafter\ifx\expandafter\relax\detokenize{#7}\relax
      \else
            \href{#7}{\color{themecolor!80!white}{\faGlobe}} % PDF 链接
      \fi
      
      \vspace{-2pt}
}}

%──────────────────Head──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
\newcommand*{\emailsymbol}{{\small\faEnvelopeO}~}
\newcommand*{\mobilephonesymbol}{{\Large\faMobilePhone}~}
\newcommand*{\homepagesymbol}{{\small\faHome}~}
\newcommand*{\webpagesymbol}{{\small\faGlobe}~}


\newcommand*{\head}{\begin{tabular*}{\textwidth}{l@{\extracolsep{\fill}}r}
            \Huge{\Me} & \emailsymbol \href{mailto:\Email}{\color{themecolor!70!white}{\Email}}\\
            \href{\Home}{\color{themecolor!80!white}{\homepagesymbol}}%
            \href{\GoogleScholar}{\color{themecolor!80!white}{\faGraduationCap}}
            % \href{\LinkedIn}{\color{themecolor!70!white}{\faLinkedinSquare}}
            \href{\GitHub}{\color{themecolor!80!white}{\faGithub}}
            & \mobilephonesymbol \phone \\
      \end{tabular*}}